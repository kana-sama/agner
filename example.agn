inc(N) -> N + 1.
dec(N) -> N - 1.

dispatch(inc) -> fun inc/1;
dispatch(dec) -> fun dec/1.

apply(Action, State) ->
  agner:print(Action),
  Fun = dispatch(Action),
  Fun(State).

main() ->
  X0 = 0,
  X1 = apply(inc, X0),
  X2 = apply(inc, X1),
  X3 = apply(dec, X2),
  X4 = apply(inc, X3).

colors_example() ->
  A0 = B0 = C0 = D0 = E0 = F0 = G0 = 1,
  H0 = I0 = J0 = K0 = L0 = M0 = N0 = P0 = 2,
  Q0 = R0 = S0 = T0 = U0 = V0 = W0 = 3,
  Y0 = Z0 = Z1 = Z2 = Z3 = Z4 = Z5 = Z6 = 4.